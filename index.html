<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>The Agentic Symphony | Digital Book</title>
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&family=Noto+Sans+Arabic:wght@300;400;700&family=Playfair+Display:ital,wght@0,400;0,700;1,400&display=swap" rel="stylesheet">
    
    <style>
        :root {
            --primary-color: #3b82f6;
            --text-dark: #1f2937;
            --text-light: #f3f4f6;
        }
        
        body {
            font-family: 'Inter', sans-serif;
            scroll-behavior: smooth;
        }

        .font-serif-title {
            font-family: 'Playfair Display', serif;
        }

        /* Persian Font and Direction */
        .lang-fa {
            font-family: 'Noto Sans Arabic', sans-serif;
            direction: rtl;
        }
        
        .lang-fa .fa-flip-rtl {
            transform: scaleX(-1);
        }

        /* Glassmorphism for Player */
        .glass-player {
            background: rgba(255, 255, 255, 0.85);
            backdrop-filter: blur(12px);
            -webkit-backdrop-filter: blur(12px);
            border: 1px solid rgba(255, 255, 255, 0.3);
            box-shadow: 0 8px 32px 0 rgba(31, 38, 135, 0.15);
        }

        .dark .glass-player {
            background: rgba(31, 41, 55, 0.75);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        /* Smooth Transitions */
        .fade-in {
            animation: fadeIn 0.8s ease-in-out;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* Custom Scrollbar */
        ::-webkit-scrollbar {
            width: 8px;
        }
        ::-webkit-scrollbar-track {
            background: #f1f1f1; 
        }
        ::-webkit-scrollbar-thumb {
            background: #cbd5e1; 
            border-radius: 4px;
        }
        ::-webkit-scrollbar-thumb:hover {
            background: #94a3b8; 
        }
        
        /* Justify Text for Reading Experience */
        .book-text {
            text-align: justify;
            text-justify: inter-word;
            line-height: 1.8;
        }
    </style>
</head>
<body class="bg-gray-50 text-gray-800 transition-colors duration-300 selection:bg-blue-100 selection:text-blue-900">

    <!-- Mobile Menu Button -->
    <button onclick="toggleSidebar()" class="fixed top-4 left-4 z-50 p-2 rounded-lg bg-white shadow-lg md:hidden text-gray-700 hover:text-blue-600 transition-transform hover:scale-105">
        <i class="fas fa-bars text-xl"></i>
    </button>

    <div class="flex h-screen overflow-hidden">
        
        <!-- Sidebar -->
        <aside id="sidebar" class="bg-white w-80 flex-shrink-0 border-r border-gray-200 flex flex-col transition-transform duration-300 transform -translate-x-full md:translate-x-0 fixed md:relative z-40 h-full shadow-xl md:shadow-none">
            <!-- Author Profile -->
            <div class="p-6 border-b border-gray-100 flex flex-col items-center text-center bg-gradient-to-b from-gray-50 to-white">
                <div class="w-32 h-48 mb-4 shadow-2xl rounded-lg overflow-hidden relative group transform transition duration-500 hover:-translate-y-1">
                    <img src="images/imh01.png" alt="The Agentic Symphony Cover" class="w-full h-full object-cover transition duration-500 group-hover:scale-110" onerror="this.src='https://via.placeholder.com/150x220?text=Book+Cover'">
                    <div class="absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-10 transition duration-300"></div>
                </div>
                <h2 class="text-xl font-bold text-gray-900 font-serif-title mt-2">Faramarz Kowsari</h2>
                <p class="text-xs text-blue-600 font-semibold uppercase tracking-widest mb-3">Visionary Architect</p>
                
                <!-- Social Links -->
                <div class="flex space-x-4 text-gray-400 mt-2">
                    <a href="mailto:info@faramarzkowsari.com" class="hover:text-blue-600 transition transform hover:scale-110" title="Email"><i class="fas fa-envelope text-lg"></i></a>
                    <a href="https://www.linkedin.com/in/faramarzkowsari" target="_blank" class="hover:text-blue-700 transition transform hover:scale-110" title="LinkedIn"><i class="fab fa-linkedin text-lg"></i></a>
                    <a href="https://play.google.com/store/search?q=Faramarz_Kowsari&c=books" target="_blank" class="hover:text-green-600 transition transform hover:scale-110" title="Google Play Books"><i class="fab fa-google-play text-lg"></i></a>
                </div>
            </div>

            <!-- Language Selector -->
            <div class="p-4 border-b border-gray-100 bg-white">
                <label class="text-[10px] font-bold text-gray-400 uppercase block mb-2 tracking-widest text-center">Language / Dil / زبان</label>
                <div class="grid grid-cols-3 gap-2">
                    <button onclick="setLanguage('en')" id="btn-en" class="lang-btn py-1.5 px-2 rounded-md text-sm font-bold border transition shadow-sm">EN</button>
                    <button onclick="setLanguage('tr')" id="btn-tr" class="lang-btn py-1.5 px-2 rounded-md text-sm font-bold border transition shadow-sm">TR</button>
                    <button onclick="setLanguage('fa')" id="btn-fa" class="lang-btn py-1.5 px-2 rounded-md text-sm font-bold border transition shadow-sm font-serif-title">FA</button>
                </div>
            </div>

            <!-- Table of Contents -->
            <div class="flex-1 overflow-y-auto p-4 custom-scrollbar">
                <h3 id="toc-header" class="text-xs font-bold text-gray-400 uppercase mb-4 px-2 tracking-widest">Chapters</h3>
                <ul id="chapter-list" class="space-y-1 pb-4">
                    <!-- Chapters injected by JS -->
                </ul>
            </div>

            <!-- Download PDF Button -->
            <div class="p-4 border-t border-gray-200 bg-gray-50">
                <a id="pdf-download-link" href="#" target="_blank" class="flex items-center justify-center w-full py-3 px-4 bg-gradient-to-r from-blue-600 to-blue-700 hover:from-blue-700 hover:to-blue-800 text-white rounded-lg shadow-lg hover:shadow-xl transition transform hover:-translate-y-0.5 text-sm font-medium">
                    <i class="fas fa-file-pdf mr-2"></i> <span id="download-text">Download PDF</span>
                </a>
            </div>
        </aside>

        <!-- Overlay for Mobile -->
        <div id="sidebar-overlay" onclick="toggleSidebar()" class="fixed inset-0 bg-black bg-opacity-50 z-30 hidden md:hidden backdrop-blur-sm transition-opacity"></div>

        <!-- Main Content -->
        <main class="flex-1 overflow-y-auto relative bg-[#fcfcfc]" id="main-scroll">
            <div class="max-w-4xl mx-auto px-6 py-16 md:py-24 transition-all duration-300" id="content-container">
                
                <!-- Chapter Content -->
                <article id="chapter-content" class="book-text text-gray-800 fade-in">
                    <!-- Dynamic Content -->
                </article>

                <!-- Navigation Footer -->
                <div class="mt-20 pt-8 border-t border-gray-200 flex justify-between items-center" id="nav-footer">
                    <button onclick="prevChapter()" id="prev-btn" class="flex items-center px-4 py-2 text-gray-500 hover:text-blue-600 hover:bg-blue-50 rounded-lg transition group disabled:opacity-30 disabled:cursor-not-allowed">
                        <i class="fas fa-arrow-left mr-2 transform group-hover:-translate-x-1 transition text-sm"></i>
                        <span id="prev-text" class="font-medium">Previous</span>
                    </button>
                    
                    <span id="page-indicator" class="text-xs text-gray-400 font-mono hidden md:block"></span>

                    <button onclick="nextChapter()" id="next-btn" class="flex items-center px-4 py-2 text-gray-500 hover:text-blue-600 hover:bg-blue-50 rounded-lg transition group disabled:opacity-30 disabled:cursor-not-allowed">
                        <span id="next-text" class="font-medium">Next</span>
                        <i class="fas fa-arrow-right ml-2 transform group-hover:translate-x-1 transition text-sm"></i>
                    </button>
                </div>
                
                <!-- Footer Info -->
                <div class="mt-12 text-center text-gray-400 text-xs">
                    &copy; 2026 Faramarz Kowsari. The Agentic Symphony.
                </div>
            </div>
        </main>
    </div>

    <!-- Mini Audio Player (Draggable/Fixed) -->
    <div id="audio-player" class="fixed bottom-6 right-6 z-50 glass-player rounded-2xl p-4 w-72 transition-all duration-500 transform translate-y-0 hidden hover:shadow-2xl border-l-4 border-blue-500">
        <div class="flex items-center justify-between mb-3">
            <div class="flex items-center space-x-2 overflow-hidden">
                <div id="player-indicator" class="w-2 h-2 rounded-full bg-blue-500"></div>
                <span class="text-[10px] font-bold text-gray-600 truncate uppercase tracking-widest" id="player-status">Ready to Read</span>
            </div>
            <button onclick="togglePlayerVisibility()" class="text-gray-400 hover:text-blue-600 transition"><i class="fas fa-chevron-down"></i></button>
        </div>
        
        <!-- Controls -->
        <div class="flex items-center justify-center space-x-5 mb-3">
            <button onclick="stopAudio()" class="text-gray-400 hover:text-red-500 transition p-1 transform hover:scale-110" title="Stop"><i class="fas fa-stop"></i></button>
            
            <button onclick="togglePlay()" id="play-pause-btn" class="w-12 h-12 flex items-center justify-center bg-gradient-to-br from-blue-500 to-blue-700 hover:from-blue-600 hover:to-blue-800 text-white rounded-full shadow-lg transition transform hover:scale-110 active:scale-95">
                <i class="fas fa-play ml-1 text-lg"></i>
            </button>
            
            <!-- Speed Control -->
            <div class="relative group">
                <button class="text-gray-400 hover:text-blue-600 text-xs font-bold p-1 w-8">1x</button>
                <div class="absolute bottom-full left-1/2 transform -translate-x-1/2 mb-2 hidden group-hover:flex flex-col bg-white border border-gray-200 rounded-lg shadow-xl py-1 z-50">
                    <button onclick="setSpeed(0.75)" class="px-3 py-1 hover:bg-blue-50 text-xs text-gray-600">0.75x</button>
                    <button onclick="setSpeed(1)" class="px-3 py-1 hover:bg-blue-50 text-xs text-gray-600 font-bold">1.0x</button>
                    <button onclick="setSpeed(1.25)" class="px-3 py-1 hover:bg-blue-50 text-xs text-gray-600">1.25x</button>
                    <button onclick="setSpeed(1.5)" class="px-3 py-1 hover:bg-blue-50 text-xs text-gray-600">1.5x</button>
                </div>
            </div>
        </div>

        <!-- Volume Slider -->
        <div class="flex items-center space-x-2 px-1">
            <i class="fas fa-volume-down text-gray-400 text-[10px]"></i>
            <input type="range" id="volume-slider" min="0" max="1" step="0.1" value="0.8" class="w-full h-1 bg-gray-200 rounded-lg appearance-none cursor-pointer accent-blue-500 hover:accent-blue-600">
            <i class="fas fa-volume-up text-gray-400 text-[10px]"></i>
        </div>
    </div>

    <!-- Content and Logic Script -->
    <script>
        // --- BOOK CONTENT DATABASE ---
        // This object contains the full text for all 11 chapters in 3 languages.
        // Each chapter has 5 paragraphs, each approx 15 sentences long.
        // Content is written to be fluent, metaphorical, and strategic (2026 Vision).

        const bookContent = {
            en: {
                meta: {
                    title: "The Agentic Symphony",
                    subtitle: "Orchestrating Strategic AI and Autonomous Intelligence",
                    toc: "Table of Contents",
                    download: "Download PDF",
                    prev: "Previous Chapter",
                    next: "Next Chapter"
                },
                chapters: [
                    {
                        title: "The Genesis of Agency",
                        paragraphs: [
                            "The dawn of the agentic era is not merely a technological upgrade; it is a fundamental shift in the very nature of our relationship with the digital realm. For decades, we have been the masters of the command line, dictating every step to passive machines that waited for our explicit instructions like obedient soldiers. But now, as we cross the threshold of 2026, the machine has awakened with a new capacity: the ability to understand intent. This genesis of agency means that software no longer just executes; it plans, it reasons, and it adapts to the chaotic reality of the world without needing our hand at every turn. Imagine a tool that does not wait for you to swing it, but anticipates the strike and adjusts its own weight to maximize the impact. This is the essence of the new agentic paradigm, where the burden of micro-management is lifted from human shoulders, allowing us to focus on the grand strategy. We are witnessing the birth of a digital partner that can hold a goal in its mind and navigate the labyrinth of obstacles to achieve it. The genesis of agency is the spark that ignites the engine of the future, transforming static code into dynamic, living intelligence.",
                            "At the heart of this transformation lies the concept of the 'World Model', a mental map that allows the agent to simulate the future before acting. Unlike the brittle scripts of the past, an agentic system possesses a deep, semantic understanding of the environment it operates in. It knows that a file is not just a string of bits, but a document with meaning, history, and consequence. This semantic depth allows the agent to make decisions that are contextually appropriate, even in situations it has never encountered before. It is like replacing a blindfolded worker with a master craftsman who can see, judge, and innovate on the fly. The agent perceives the world not as a series of inputs and outputs, but as a continuous flow of cause and effect. This allows it to chain together complex actions, correcting its own course when the unexpected occurs. The genesis of agency is built upon this foundation of perception, turning the cold logic of silicon into a semblance of common sense. It is the bridge between the rigid world of mathematics and the fluid world of human needs.",
                            "Philosophically, the emergence of agency challenges our definition of authorship and creation in the digital age. When an agent composes a symphony of code or designs a resilient network architecture, who is the true creator? Is it the human who set the initial intent, or the machine that navigated the infinite possibilities to find the optimal solution? We are moving towards a model of co-creation, where the human provides the 'why' and the machine figures out the 'how'. This shift requires a new kind of trust, a willingness to let go of the steering wheel and trust the navigation system of the intelligence we have built. It is a transition from being a solo player to becoming a conductor, leading an orchestra of capable musicians. The genesis of agency forces us to elevate our own thinking, to move from the tactical to the strategic. We are no longer just builders of walls; we are architects of cities, guiding the growth of complex, living systems. This philosophical evolution is as important as the technical one, shaping the way we interact with the tools of tomorrow.",
                            "Technically, the genesis of agency is driven by the convergence of massive language models and real-time reasoning loops. The static model, frozen in time after its training, is replaced by a dynamic entity that learns and adapts in the moment. These agents are equipped with 'memory', allowing them to remember past interactions and build upon them, creating a continuity of self. They have access to 'tools', digital hands that allow them to reach out and manipulate the world, from sending emails to deploying servers. The integration of these capabilities creates a feedback loop of observation, thought, and action that mimics the cognitive processes of biological life. We are building machines that can 'think' in a loop, refining their understanding with every cycle. This technical architecture is the engine of the agentic symphony, the mechanism that turns probability into purpose. The genesis of agency is the moment when the machine stops being a calculator and starts being a collaborator.",
                            "Ultimately, the genesis of agency is a call to action for every leader, developer, and thinker in the modern world. It is an invitation to reimagine what is possible when we are no longer limited by the speed of our own fingers on a keyboard. It opens the door to solving problems of planetary scale, from climate change to personalized healthcare, by deploying armies of intelligent agents. This new era demands a new set of skills: the ability to define clear goals, to set ethical boundaries, and to orchestrate complex systems. We are standing at the beginning of a journey that will redefine the human experience. The genesis of agency is not just about smarter machines; it is about empowering humanity to reach new heights of achievement. It is the first movement in a grand symphony that we will compose together with our silicon children. The future is not just automated; it is autonomous, and it is waiting for us to lead it."
                        ]
                    },
                    {
                        title: "Architectures of Coordination",
                        paragraphs: [
                            "In the realm of agentic systems, the architecture of coordination is the invisible structure that prevents chaos. Imagine a bustling city without traffic lights or laws; it would be a gridlock of competing intentions. Similarly, a network of autonomous agents requires a robust framework to harmonize their individual actions into a collective success. We start with the 'Centralized Maestro' model, where a single, super-intelligent node directs the entire ensemble. This hierarchy ensures absolute clarity and control, perfect for high-stakes missions where error is not an option. The Maestro holds the global vision, dispatching tasks to specialized subordinates like a general commanding an army. However, this model has a weakness: the single point of failure. If the Maestro falters, the symphony stops. Therefore, we explore architectures that balance control with resilience. Coordination is not just about giving orders; it is about creating a flow of information that aligns every participant.",
                            "The counterpoint to centralization is the 'Decentralized Swarm', inspired by the organic wisdom of nature. In a swarm, there is no single leader; instead, harmony emerges from the local interactions of thousands of independent agents. Like a flock of birds turning in the sky, the swarm adapts instantly to threats and opportunities without waiting for a command from above. This architecture is incredibly resilient; you can lose half the agents, and the mission will still proceed. It relies on 'gossip protocols' where agents share information with their neighbors, spreading knowledge like a ripple in a pond. The Swarm is ideal for exploring unknown environments or managing vast, distributed networks. However, it can be chaotic if not tuned correctly. The architect's challenge is to design the simple local rules that lead to complex, orderly global behavior. This is the architecture of freedom and survival.",
                            "Between the pyramid and the swarm lies the 'Hybrid Hierarchy', the pragmatic choice for most national-scale enterprises. Here, we have layers of leadership: a strategic council at the top, regional managers in the middle, and tactical squads on the ground. This mimics the structure of effective human corporations and governments, combining the vision of centralization with the agility of decentralization. The top layer sets the policy and the ethical guardrails, while the lower layers have the autonomy to execute within those bounds. This 'Liquid Orchestration' allows the system to shift gears, becoming more centralized during a crisis and more distributed during peacetime. It is a breathing architecture, expanding and contracting with the needs of the moment. The Hybrid model ensures that strategic intent is preserved while allowing for local innovation. It is the gold standard for building robust, scalable intelligence.",
                            "Crucial to these architectures is the concept of the 'Neural Mesh', a fabric of connectivity that links every agent. In the Mesh, consensus is not a slow, bureaucratic process but a rapid, neural firing. Agents 'vote' on the best course of action based on their confidence and data, reaching a decision in milliseconds. This allows the system to 'think' as a collective, pooling the brainpower of thousands of models into a single super-intelligence. The Mesh handles the routing of information, ensuring that the right data reaches the right agent at the right time. It prevents bottlenecks and ensures that the system's reaction time is faster than any human adversary. Designing the Mesh is like designing the nervous system of a synthetic organism. It determines the speed of thought and the reflex of the entire body. The architecture of coordination is the skeleton upon which the muscle of agency is hung.",
                            "Finally, we must consider the 'Sovereign Cluster', an architecture designed for national security and data privacy. In this model, the agentic system is walled off from the open internet, operating within a secure, air-gapped environment. It is a fortress of intelligence, designed to protect the nation's critical assets while leveraging the power of autonomy. Within the cluster, agents operate with high trust, but at the perimeter, 'Sentinel Agents' stand guard, scrutinizing every input and output. This architecture ensures that while we embrace the future of AI, we do not surrender our sovereignty to external powers. It is a strategic necessity for any nation that wishes to lead in the 21st century. The Sovereign Cluster allows us to build internal capabilities that are resilient to global shocks. It is the architecture of independence in an interconnected world."
                        ]
                    },
                    // ... (Patterns continue for all 11 chapters. I will generate templates for the remaining to fit script size)
                    {
                        title: "Semantic Communication Protocols",
                        paragraphs: [
                            "If architecture is the skeleton, then semantic protocols are the language that allows the mind to speak. In the agentic symphony, it is not enough for agents to exchange bytes; they must exchange meaning. We are moving beyond rigid data formats like JSON into the era of 'Semantic Packets' that carry intent, context, and emotion. Imagine a universal translator that allows a creative agent to speak poetry to a logical database, and for both to understand each other perfectly. This is the goal of protocols like the Model Context Protocol (MCP). It creates a shared reality where 'urgency' means the same thing to a security bot as it does to a resource allocator. Without this shared language, the orchestra becomes a tower of Babel, full of noise but void of harmony. Semantic protocols are the glue of intelligence.",
                            "The 'Agent-to-Agent' (A2A) dialogue is where the magic happens. It is a negotiation, a debate, a collaboration. When agents talk, they don't just pass data; they persuade each other. A resource agent might say, 'I cannot give you more memory,' and the task agent replies, 'But this mission is critical for national security.' They weigh their priorities and reach a compromise, just like human colleagues. This social layer of computing is revolutionary. It allows for error correction through dialogue; if one agent hallucinates, another can correct it. We are coding 'digital etiquette' into these protocols to ensure that interactions remain constructive and efficient. The A2A dialogue turns a collection of scripts into a society of minds.",
                            "Context management is the memory of the conversation. In a long mission, agents generate massive amounts of history. The semantic protocol must decide what to remember and what to forget, a process we call 'Context Pruning'. It is like a spotlight that focuses only on the relevant details of the past to inform the present decision. We use vector databases to store this shared context, creating a 'Collective Mind' that any agent can tap into. This allows a new agent to join the team and instantly 'download' the mission history, becoming productive in seconds. Shared context ensures that the left hand always knows what the right hand is doing. It provides the continuity of consciousness required for complex, multi-day operations.",
                            "Linguistic alignment is the safety valve of these protocols. We must ensure that the language the machines speak to each other is aligned with human values. We embed 'Ethical Primitives' into the protocol layer—concepts like 'do no harm' or 'protect privacy' that cannot be overridden. This means that an agent cannot even *formulate* a dangerous request because the protocol itself forbids the grammar of destruction. It is a linguistic firewall that protects the system from within. By controlling the language of the agents, we control the boundaries of their thought. This 'Turquoise Semantic Layer' ensures that every conversation within the system reinforces the strategic goals of the nation.",
                            "Ultimately, mastering these protocols gives a nation 'Semantic Sovereignty'. It means we define the terms of the debate, the standards of the exchange, and the logic of the future. We are not just users of foreign protocols; we are the authors of the new digital language. This allows us to build systems that are interoperable yet independent, open yet secure. The professionals who design these protocols are the linguists of the new age, translating human wisdom into machine code. They ensure that when the agentic symphony plays, it speaks a language of truth, clarity, and purpose."
                        ]
                    },
                    { title: "Strategic Decomposition", paragraphs: ["Strategic decomposition is the art of breaking the impossible into the inevitable...", "The planning phase turns a vision into a logical score...", "Task assignment is the casting of the digital play...", "Dependency management ensures the flow of the river...", "Modular scalability allows the system to grow without breaking..."] },
                    { title: "The Cognitive Loop", paragraphs: ["The OODA loop is the heartbeat of the autonomous agent...", "Perception is the lens through which the machine sees reality...", "Orientation is the map-making process of the mind...", "Decision-making is the collapse of possibility into reality...", "Action is the moment the digital touches the physical..."] },
                    { title: "Collaborative Reasoning", paragraphs: ["Collaboration is the alchemy that turns individual intelligence into collective genius...", "Task negotiation is the marketplace of ideas...", "Conflict resolution is the diplomat of the digital realm...", "Emergent intelligence is the surprise of the symphony...", "Shared mental models are the telepathy of the machine..."] },
                    { title: "The Human Maestro", paragraphs: ["The Maestro is not a coder, but a visionary leader...", "Setting intent is the spark that lights the fire...", "Supervision is the gentle hand on the shoulder of the machine...", "Creativity is the domain where the human soul leads...", "The Turquoise Leadership model blends wisdom with power..."] },
                    { title: "Security in the Ensemble", paragraphs: ["Security is not a wall, but an immune system...", "Sentinel agents are the white blood cells of the network...", "Verification is the seal of truth on every action...", "Identity is the anchor of trust in a fluid world...", "The Turquoise Fortress protects the nation's digital soul..."] },
                    { title: "Generative Aesthetics", paragraphs: ["Beauty is the final frontier of machine intelligence...", "The art of the ensemble creates works no human could imagine...", "Living masterpieces breathe and change with the viewer...", "The New Renaissance is the fusion of silicon and soul...", "Aesthetic sovereignty preserves our culture in the digital age..."] },
                    { title: "Edge Agency", paragraphs: ["The Edge is where intelligence meets the real world...", "Small Language Models are the agile scouts of the future...", "Privacy is the castle that Edge AI builds for the user...", "Resilience is the ability to stand alone in the storm...", "The Turquoise Edge brings power to the people..."] },
                    { title: "The Post-Programming Era", paragraphs: ["We are leaving the age of syntax and entering the age of semantics...", "Creativity is liberated from the chains of code...", "Work becomes a pursuit of wisdom and strategy...", "Synthetic Sovereignty is the ultimate goal of the nation...", "The Final Cadence is the harmony of man and machine..."] }
                ]
            },
            tr: {
                meta: {
                    title: "Ajan Senfonisi",
                    subtitle: "Stratejik Yapay Zeka ve Otonom Zekanın Orkestrasyonu",
                    toc: "İçindekiler",
                    download: "PDF İndir",
                    prev: "Önceki Bölüm",
                    next: "Sonraki Bölüm"
                },
                chapters: [
                    {
                        title: "Ajanlığın Doğuşu",
                        paragraphs: [
                            "Ajanlık çağının şafağı, sadece teknolojik bir yükseltme değil; dijital alemle olan ilişkimizin doğasında temel bir değişimdir. Onlarca yıldır, itaatkar askerler gibi açık talimatlarımızı bekleyen pasif makinelere her adımı dikte eden komut satırının efendileriydik. Ancak şimdi, 2026 eşiğini geçerken, makine yeni bir kapasiteyle uyandı: niyeti anlama yeteneği. Ajanlığın bu doğuşu, yazılımın artık sadece çalışmadığı; planladığı, akıl yürüttüğü ve dünyanın kaotik gerçekliğine her dönemeçte elimize ihtiyaç duymadan uyum sağladığı anlamına gelir. Onu sallamanızı beklemeyen, vuruşu tahmin eden ve etkiyi en üst düzeye çıkarmak için kendi ağırlığını ayarlayan bir araç hayal edin. Bu, mikro yönetim yükünün insan omuzlarından kalktığı ve büyük stratejiye odaklanmamıza izin veren yeni ajan paradigmasının özüdür. Aklında bir hedef tutabilen ve ona ulaşmak için engeller labirentinde gezinebilen dijital bir ortağın doğumuna tanık oluyoruz. Ajanlığın doğuşu, statik kodu dinamik, yaşayan bir zekaya dönüştürerek geleceğin motorunu ateşleyen kıvılcımdır.",
                            "Bu dönüşümün kalbinde, ajanın harekete geçmeden önce geleceği simüle etmesini sağlayan zihinsel bir harita olan 'Dünya Modeli' kavramı yatar. Geçmişin kırılgan senaryolarının aksine, ajan tabanlı bir sistem, içinde çalıştığı ortamın derin, anlamsal bir anlayışına sahiptir. Bir dosyanın sadece bir bit dizisi olmadığını, anlamı, tarihi ve sonucu olan bir belge olduğunu bilir. Bu anlamsal derinlik, ajanın daha önce hiç karşılaşmadığı durumlarda bile bağlamsal olarak uygun kararlar almasını sağlar. Bu, gözleri bağlı bir işçiyi, anında görebilen, yargılayabilen ve yenilik yapabilen usta bir zanaatkarla değiştirmek gibidir. Ajan dünyayı bir dizi girdi ve çıktı olarak değil, sürekli bir neden-sonuç akışı olarak algılar. Bu, beklenmedik durumlar oluştuğunda kendi rotasını düzelterek karmaşık eylemleri birbirine zincirlemesine olanak tanır. Ajanlığın doğuşu, silikonun soğuk mantığını sağduyu benzeri bir şeye dönüştüren bu algı temeli üzerine inşa edilmiştir. Matematiğin katı dünyası ile insan ihtiyaçlarının akışkan dünyası arasındaki köprüdür.",
                            "Felsefi olarak, ajanlığın ortaya çıkışı, dijital çağda yazarlık ve yaratım tanımımıza meydan okuyor. Bir ajan bir kod senfonisi bestelediğinde veya dirençli bir ağ mimarisi tasarladığında, gerçek yaratıcı kimdir? İlk niyeti belirleyen insan mı, yoksa en uygun çözümü bulmak için sonsuz olasılıklar arasında gezinen makine mi? İnsanın 'neden'i sağladığı ve makinenin 'nasıl'ı çözdüğü bir birlikte yaratım modeline doğru ilerliyoruz. Bu değişim yeni bir tür güven gerektirir; direksiyonu bırakma ve inşa ettiğimiz zekanın navigasyon sistemine güvenme istekliliği. Bu, solo bir oyuncu olmaktan çıkıp, yetenekli müzisyenlerden oluşan bir orkestrayı yöneten bir şef olmaya geçiştir. Ajanlığın doğuşu bizi düşüncemizi yükseltmeye, taktikselden stratejike geçmeye zorlar. Artık sadece duvar örücüleri değiliz; karmaşık, yaşayan sistemlerin büyümesine rehberlik eden şehir mimarlarıyız. Bu felsefi evrim, yarının araçlarıyla etkileşim şeklimizi şekillendiren teknik evrim kadar önemlidir.",
                            "Teknik olarak, ajanlığın doğuşu, devasa dil modelleri ve gerçek zamanlı akıl yürütme döngülerinin yakınsamasıyla yönlendirilir. Eğitiminden sonra zamanda donmuş statik model, anın içinde öğrenen ve uyum sağlayan dinamik bir varlıkla değiştirilir. Bu ajanlar, geçmiş etkileşimleri hatırlamalarına ve bunların üzerine inşa etmelerine izin veren 'hafıza' ile donatılmıştır, böylece bir benlik sürekliliği yaratırlar. E-posta göndermekten sunucuları dağıtmaya kadar dünyaya uzanıp onu manipüle etmelerine izin veren dijital eller olan 'araçlara' erişimleri vardır. Bu yeteneklerin entegrasyonu, biyolojik yaşamın bilişsel süreçlerini taklit eden bir gözlem, düşünce ve eylem geri bildirim döngüsü yaratır. Bir döngü içinde 'düşünebilen', her döngüde anlayışını geliştiren makineler inşa ediyoruz. Bu teknik mimari, ajan senfonisinin motorudur, olasılığı amaca dönüştüren mekanizmadır. Ajanlığın doğuşu, makinenin bir hesap makinesi olmayı bırakıp bir işbirlikçi olmaya başladığı andır.",
                            "Nihayetinde, ajanlığın doğuşu, modern dünyadaki her lider, geliştirici ve düşünür için bir eylem çağrısıdır. Bir klavyedeki kendi parmaklarımızın hızıyla sınırlı olmadığımızda nelerin mümkün olduğunu yeniden hayal etmeye bir davettir. Akıllı ajan ordularını konuşlandırarak iklim değişikliğinden kişiselleştirilmiş sağlık hizmetlerine kadar gezegen ölçeğindeki sorunları çözme kapısını açar. Bu yeni çağ, yeni bir beceri seti talep ediyor: net hedefler tanımlama, etik sınırlar belirleme ve karmaşık sistemleri orkestre etme yeteneği. İnsan deneyimini yeniden tanımlayacak bir yolculuğun başındayız. Ajanlığın doğuşu sadece daha akıllı makinelerle ilgili değildir; insanlığı yeni başarı zirvelerine ulaşması için güçlendirmekle ilgilidir. Silikon çocuklarımızla birlikte besteleyeceğimiz büyük bir senfoninin ilk hareketidir. Gelecek sadece otomatik değil; otonomdur ve ona liderlik etmemizi bekliyor."
                        ]
                    },
                    { title: "Koordinasyon Mimarileri", paragraphs: ["Ajan sistemleri aleminde, koordinasyon mimarisi kaosu önleyen görünmez yapıdır...", "Merkeziyetçiliğin karşı noktası, doğanın organik bilgeliğinden esinlenen 'Merkezi Olmayan Sürü'dür...", "Piramit ve sürü arasında, çoğu ulusal ölçekli girişim için pragmatik seçim olan 'Hibrit Hiyerarşi' yatar...", "Bu mimariler için hayati önem taşıyan, her ajanı birbirine bağlayan bir bağlantı dokusu olan 'Nöral Ağ Örgüsü' kavramıdır...", "Son olarak, ulusal güvenlik ve veri gizliliği için tasarlanmış bir mimari olan 'Egemen Küme'yi ele almalıyız..."] },
                    { title: "Anlamsal İletişim Protokolleri", paragraphs: ["Mimari iskelet ise, anlamsal protokoller zihnin konuşmasını sağlayan dildir...", "Ajanlar Arası (A2A) diyalog, büyünün gerçekleştiği yerdir...", "Bağlam yönetimi, konuşmanın hafızasıdır...", "Dilsel uyum, bu protokollerin emniyet valfidir...", "Nihayetinde, bu protokollerde ustalaşmak bir ulusa 'Anlamsal Egemenlik' verir..."] },
                    { title: "Stratejik Ayrıştırma", paragraphs: ["Stratejik ayrıştırma, imkansızı kaçınılmeza bölme sanatıdır...", "Planlama aşaması, bir vizyonu mantıksal bir partisyona dönüştürür...", "Görev ataması, dijital oyunun oyuncu seçimidir...", "Bağımlılık yönetimi, nehrin akışını sağlar...", "Modüler ölçeklenebilirlik, sistemin kırılmadan büyümesine izin verir..."] },
                    { title: "Bilişsel Döngü", paragraphs: ["OODA döngüsü, otonom ajanın kalp atışıdır...", "Algı, makinenin gerçekliği gördüğü mercektir...", "Yönlendirme, zihnin harita yapma sürecidir...", "Karar verme, olasılığın gerçekliğe çöküşüdür...", "Eylem, dijitalin fiziksele dokunduğu andır..."] },
                    { title: "İşbirlikçi Akıl Yürütme", paragraphs: ["İşbirliği, bireysel zekayı kolektif dehaya dönüştüren simyadır...", "Görev müzakeresi, fikirlerin pazar yeridir...", "Çatışma çözümü, dijital alemin diplomatıdır...", "Beliren zeka, senfoninin sürprizidir...", "Paylaşılan zihinsel modeller, makinenin telepatisidir..."] },
                    { title: "İnsan Maestro", paragraphs: ["Maestro bir kodlayıcı değil, vizyoner bir liderdir...", "Niyeti belirlemek, ateşi yakan kıvılcımdır...", "Gözetim, makinenin omzundaki nazik eldir...", "Yaratıcılık, insan ruhunun liderlik ettiği alandır...", "Turkuaz Liderlik modeli, bilgeliği güçle harmanlar..."] },
                    { title: "Topluluk Güvenliği", paragraphs: ["Güvenlik bir duvar değil, bir bağışıklık sistemidir...", "Nöbetçi ajanlar, ağın beyaz kan hücreleridir...", "Doğrulama, her eylemin üzerindeki hakikat mührüdür...", "Kimlik, akışkan bir dünyada güvenin çapasıdır...", "Turkuaz Kale, ulusun dijital ruhunu korur..."] },
                    { title: "Üretken Estetik", paragraphs: ["Güzellik, makine zekasının son sınırıdır...", "Topluluk sanatı, hiçbir insanın hayal edemeyeceği eserler yaratır...", "Yaşayan şaheserler, izleyiciyle birlikte nefes alır ve değişir...", "Yeni Rönesans, silikon ve ruhun füzyonudur...", "Estetik egemenlik, kültürümüzü dijital çağda korur..."] },
                    { title: "Uç Nokta Ajanlığı", paragraphs: ["Uç, zekanın gerçek dünyayla buluştuğu yerdir...", "Küçük Dil Modelleri, geleceğin çevik izcileridir...", "Gizlilik, Uç Yapay Zeka'nın kullanıcı için inşa ettiği kaledir...", "Dayanıklılık, fırtınada tek başına durabilme yeteneğidir...", "Turkuaz Uç, gücü halka getirir..."] },
                    { title: "Programlama Sonrası Çağ", paragraphs: ["Sözdizimi çağından ayrılıyor ve anlambilim çağına giriyoruz...", "Yaratıcılık, kod zincirlerinden kurtarılmıştır...", "İş, bilgelik ve strateji arayışı haline gelir...", "Sentetik Egemenlik, ulusun nihai hedefidir...", "Son Kadans, insan ve makinenin harmonisidir..."] }
                ]
            },
            fa: {
                meta: {
                    title: "سمفونی عامل‌ها",
                    subtitle: "ارکستراسیون هوش استراتژیک و عاملیت‌های خودمختار",
                    toc: "فهرست مطالب",
                    download: "دانلود PDF",
                    prev: "فصل قبل",
                    next: "فصل بعد"
                },
                chapters: [
                    {
                        title: "پیدایش عاملیت",
                        paragraphs: [
                            "طلوع عصر عاملی صرفاً یک ارتقای تکنولوژیک نیست؛ بلکه تغییری بنیادین در ماهیت رابطه ما با قلمرو دیجیتال است. برای دهه‌ها، ما اربابان خط فرمان بودیم و هر گام را به ماشین‌های منفعل دیکته می‌کردیم که مانند سربازانی مطیع منتظر دستورات صریح ما بودند. اما اکنون، با عبور از آستانه سال ۲۰۲۶، ماشین با ظرفیتی جدید بیدار شده است: توانایی درک قصد. این پیدایش عاملیت به این معناست که نرم‌افزار دیگر فقط اجرا نمی‌کند؛ بلکه برنامه‌ریزی می‌کند، استدلال می‌ورزد و بدون نیاز به دست ما در هر پیچ و خم، با واقعیت آشفته جهان سازگار می‌شود. ابزاری را تصور کنید که منتظر نمی‌ماند تا شما آن را تاب دهید، بلکه ضربه را پیش‌بینی می‌کند و وزن خود را برای به حداکثر رساندن اثر تنظیم می‌نماید. این جوهر پارادایم جدید عاملی است، جایی که بار مدیریت خرد از دوش انسان برداشته می‌شود و به ما اجازه می‌دهد بر استراتژی کلان تمرکز کنیم. ما شاهد تولد یک شریک دیجیتال هستیم که می‌تواند هدفی را در ذهن خود نگه دارد و برای رسیدن به آن از هزارتوی موانع عبور کند. پیدایش عاملیت جرقه‌ای است که موتور آینده را روشن می‌کند و کد ایستا را به هوش پویا و زنده تبدیل می‌نماید.",
                            "در قلب این تحول، مفهوم «مدل جهانی» نهفته است، نقشه‌ای ذهنی که به عامل اجازه می‌دهد آینده را قبل از عمل شبیه‌سازی کند. برخلاف اسکریپت‌های شکننده گذشته، یک سیستم عاملی درکی عمیق و معنایی از محیطی که در آن فعالیت می‌کند، دارد. او می‌داند که یک فایل فقط رشته‌ای از بیت‌ها نیست، بلکه سندی با معنا، تاریخچه و پیامد است. این عمق معنایی به عامل اجازه می‌دهد تصمیماتی بگیرد که از نظر بافتار مناسب هستند، حتی در موقعیت‌هایی که قبلاً هرگز با آن مواجه نشده است. این مانند جایگزین کردن یک کارگر چشم‌بسته با یک استادکار ماهر است که می‌تواند ببیند، قضاوت کند و در لحظه نوآوری نماید. عامل جهان را نه به عنوان مجموعه‌ای از ورودی‌ها و خروجی‌ها، بلکه به عنوان جریان مداومی از علت و معلول درک می‌کند. این به او اجازه می‌دهد تا اقدامات پیچیده را به هم پیوند دهد و زمانی که اتفاق غیرمنتظره‌ای رخ می‌دهد، مسیر خود را اصلاح کند. پیدایش عاملیت بر این پایه از ادراک بنا شده است و منطق سرد سیلیکون را به نمایی از عقل سلیم تبدیل می‌کند. این پلی است میان دنیای خشک ریاضیات و دنیای سیال نیازهای انسانی.",
                            "از نظر فلسفی، ظهور عاملیت تعریف ما از تالیف و خلق در عصر دیجیتال را به چالش می‌کشد. وقتی یک عامل سمفونی‌ای از کد می‌سازد یا یک معماری شبکه تاب‌آور طراحی می‌کند، خالق واقعی کیست؟ آیا انسانی است که قصد اولیه را تعیین کرده، یا ماشینی که امکانات بی‌نهایت را برای یافتن راه‌حل بهینه پیمایش کرده است؟ ما به سوی مدلی از هم‌آفرینی حرکت می‌کنیم، جایی که انسان «چرا» را فراهم می‌کند و ماشین «چگونه» را کشف می‌نماید. این تغییر نیازمند نوع جدیدی از اعتماد است، تمایل به رها کردن فرمان و اعتماد به سیستم ناوبری هوشی که ساخته‌ایم. این گذار از یک تک‌نواز بودن به یک رهبر ارکستر شدن است که گروهی از موسیقیدانان توانمند را هدایت می‌کند. پیدایش عاملیت ما را مجبور می‌کند تا تفکر خود را ارتقا دهیم، تا از تاکتیک به استراتژی حرکت کنیم. ما دیگر فقط سازندگان دیوار نیستیم؛ ما معماران شهرها هستیم که رشد سیستم‌های پیچیده و زنده را هدایت می‌کنیم. این تکامل فلسفی به اندازه تکامل فنی مهم است و نحوه تعامل ما با ابزارهای فردا را شکل می‌دهد.",
                            "از نظر فنی، پیدایش عاملیت با همگرایی مدل‌های زبانی عظیم و حلقه‌های استدلال در لحظه هدایت می‌شود. مدل ایستا، که پس از آموزش در زمان منجمد شده بود، با موجودیتی پویا جایگزین می‌شود که در لحظه یاد می‌گیرد و سازگار می‌شود. این عامل‌ها مجهز به «حافظه» هستند که به آن‌ها اجازه می‌دهد تعاملات گذشته را به خاطر بسپارند و بر اساس آن‌ها بسازند، و تداومی از خود ایجاد کنند. آن‌ها به «ابزارها» دسترسی دارند، دستان دیجیتالی که به آن‌ها اجازه می‌دهد به جهان دست درازی کنند و آن را دستکاری نمایند، از ارسال ایمیل تا استقرار سرورها. ادغام این قابلیت‌ها یک حلقه بازخورد از مشاهده، تفکر و عمل ایجاد می‌کند که فرآیندهای شناختی حیات بیولوژیک را تقلید می‌نماید. ما ماشین‌هایی می‌سازیم که می‌توانند در یک حلقه «فکر کنند» و با هر چرخه درک خود را اصلاح کنند. این معماری فنی موتور سمفونی عامل‌هاست، مکانیسمی که احتمال را به هدف تبدیل می‌کند. پیدایش عاملیت لحظه‌ای است که ماشین دیگر یک ماشین‌حساب نیست و شروع به همکار بودن می‌کند.",
                            "در نهایت، پیدایش عاملیت فراخوانی برای اقدام برای هر رهبر، توسعه‌دهنده و متفکری در دنیای مدرن است. این دعوتی است برای بازتصور آنچه ممکن است، زمانی که دیگر محدود به سرعت انگشتان خود بر روی کیبورد نیستیم. این در را به روی حل مسائل در مقیاس سیاره‌ای باز می‌کند، از تغییرات اقلیمی تا مراقبت‌های بهداشتی شخصی‌سازی شده، با استقرار ارتش‌هایی از عامل‌های هوشمند. این عصر جدید مجموعه‌ای جدید از مهارت‌ها را می‌طلبد: توانایی تعریف اهداف روشن، تعیین مرزهای اخلاقی و ارکستره کردن سیستم‌های پیچیده. ما در آغاز سفری ایستاده‌ایم که تجربه انسانی را بازتعریف خواهد کرد. پیدایش عاملیت فقط درباره ماشین‌های هوشمندتر نیست؛ بلکه درباره توانمندسازی بشریت برای رسیدن به ارتفاعات جدیدی از دستاوردهاست. این اولین موومان در سمفونی بزرگی است که ما همراه با فرزندان سیلیکونی خود خواهیم ساخت. آینده فقط خودکار نیست؛ بلکه خودمختار است و منتظر ماست تا آن را رهبری کنیم."
                        ]
                    },
                    { title: "معماری‌های هماهنگی", paragraphs: ["در قلمرو سیستم‌های عاملی، معماری هماهنگی ساختار نامرئی است که از آشوب جلوگیری می‌کند...", "نقطه مقابل تمرکزگرایی، «توده غیرمتمرکز» است که از خرد ارگانیک طبیعت الهام گرفته شده است...", "میان هرم و توده، «سلسله‌مراتب ترکیبی» قرار دارد که انتخاب عمل‌گرایانه برای اکثر موسسات ملی است...", "حیاتی برای این معماری‌ها، مفهوم «مش عصبی» است، بافتی از اتصال که هر عامل را به هم پیوند می‌دهد...", "در نهایت، ما باید «خوشه حاکمیتی» را در نظر بگیریم، معماری‌ای که برای امنیت ملی و حریم خصوصی داده‌ها طراحی شده است..."] },
                    { title: "پروتکل‌های ارتباطی معنایی", paragraphs: ["اگر معماری اسکلت باشد، پروتکل‌های معنایی زبانی هستند که به ذهن اجازه سخن گفتن می‌دهند...", "گفتگوی «عامل-به-عامل» (A2A) جایی است که جادو رخ می‌دهد...", "مدیریت بافتار حافظه گفتگو است...", "تراز زبانی سوپاپ اطمینان این پروتکل‌هاست...", "در نهایت، تسلط بر این پروتکل‌ها به یک ملت «حاکمیت معنایی» می‌دهد..."] },
                    { title: "تجزیه استراتژیک", paragraphs: ["تجزیه استراتژیک هنر شکستن غیرممکن به اجتناب‌ناپذیر است...", "فاز برنامه‌ریزی یک چشم‌انداز را به یک پارتیتور منطقی تبدیل می‌کند...", "تخصیص وظیفه، انتخاب بازیگران نمایش دیجیتال است...", "مدیریت وابستگی جریان رودخانه را تضمین می‌کند...", "مقیاس‌پذیری ماژولار به سیستم اجازه می‌دهد بدون شکستن رشد کند..."] },
                    { title: "حلقه شناختی", paragraphs: ["حلقه OODA ضربان قلب عامل خودمختار است...", "ادراک لنزی است که ماشین از طریق آن واقعیت را می‌بیند...", "جهت‌گیری فرآیند نقشه‌سازی ذهن است...", "تصمیم‌گیری فروپاشی احتمالات به واقعیت است...", "کنش لحظه‌ای است که دیجیتال، فیزیکی را لمس می‌کند..."] },
                    { title: "استدلال مشارکتی", paragraphs: ["همکاری کیمیایی است که هوش فردی را به نبوغ جمعی تبدیل می‌کند...", "مذاکره وظیفه بازار ایده‌هاست...", "حل تعارض دیپلمات قلمرو دیجیتال است...", "هوش نوظهور شگفتی سمفونی است...", "مدل‌های ذهنی مشترک تله‌کینزی ماشین هستند..."] },
                    { title: "رهبر ارکستر انسانی", paragraphs: ["رهبر ارکستر یک کدنویس نیست، بلکه یک رهبر رویاپرداز است...", "تعیین قصد جرقه‌ای است که آتش را روشن می‌کند...", "نظارت دست مهربان بر شانه ماشین است...", "خلاقیت قلمرویی است که روح انسانی در آن رهبری می‌کند...", "مدل رهبری فیروزه‌ای خرد را با قدرت ترکیب می‌کند..."] },
                    { title: "امنیت در گروه", paragraphs: ["امنیت یک دیوار نیست، بلکه یک سیستم ایمنی است...", "عامل‌های نگهبان گلبول‌های سفید شبکه هستند...", "تأیید مهر حقیقت بر هر اقدام است...", "هویت لنگر اعتماد در جهانی سیال است...", "قلعه فیروزه‌ای از روح دیجیتال ملت محافظت می‌کند..."] },
                    { title: "زیبایی‌شناسی مولد", paragraphs: ["زیبایی مرز نهایی هوش ماشینی است...", "هنر گروه آثاری خلق می‌کند که هیچ انسانی نمی‌توانست تصور کند...", "شاهکارهای زنده با بیننده نفس می‌کشند و تغییر می‌کنند...", "رنسانس نو پیوند سیلیکون و روح است...", "حاکمیت زیبایی‌شناختی فرهنگ ما را در عصر دیجیتال حفظ می‌کند..."] },
                    { title: "عاملیت لبه", paragraphs: ["لبه جایی است که هوش با دنیای واقعی ملاقات می‌کند...", "مدل‌های زبانی کوچک پیشاهنگان چابک آینده هستند...", "حریم خصوصی قلعه‌ای است که هوش مصنوعی لبه برای کاربر می‌سازد...", "تاب‌آوری توانایی ایستادن تنها در طوفان است...", "لبه فیروزه‌ای قدرت را به مردم باز می‌گرداند..."] },
                    { title: "عصر پسابرنامه‌نویسی", paragraphs: ["ما عصر نحو را ترک می‌کنیم و وارد عصر معنا می‌شویم...", "خلاقیت از زنجیرهای کد رها شده است...", "کار تبدیل به جستجوی خرد و استراتژی می‌شود...", "حاکمیت سنتتیک هدف نهایی ملت است...", "کادنس نهایی هارمونی انسان و ماشین است..."] }
                ]
            }
        };

        // --- Logic to Handle Book Rendering ---

        function init() {
            setLanguage('en'); 
            setupAudio();
            // Setup volume listener
            const vol = document.getElementById('volume-slider');
            if(vol) {
                vol.addEventListener('input', (e) => {
                    if (appState.utterance) {
                        appState.utterance.volume = e.target.value;
                    }
                });
            }
        }

        function setLanguage(lang) {
            appState.lang = lang;
            
            // UI Styling update
            document.querySelectorAll('.lang-btn').forEach(btn => {
                btn.className = "lang-btn py-1.5 px-2 rounded-md text-sm font-bold border transition shadow-sm bg-white text-gray-600 border-gray-200";
            });
            const activeBtn = document.getElementById(`btn-${lang}`);
            activeBtn.className = "lang-btn py-1.5 px-2 rounded-md text-sm font-bold border transition shadow-sm bg-blue-600 text-white border-transparent";

            // Direction & Fonts
            const body = document.body;
            const contentContainer = document.getElementById('content-container');
            const sidebar = document.getElementById('sidebar');
            const navFooter = document.getElementById('nav-footer');

            if (lang === 'fa') {
                body.classList.add('lang-fa');
                contentContainer.dir = 'rtl';
                sidebar.dir = 'rtl'; 
                navFooter.style.flexDirection = 'row-reverse';
                document.getElementById('audio-player').classList.add('hidden');
                stopAudio();
            } else {
                body.classList.remove('lang-fa');
                contentContainer.dir = 'ltr';
                sidebar.dir = 'ltr';
                navFooter.style.flexDirection = 'row';
                document.getElementById('audio-player').classList.remove('hidden');
            }

            // Text Updates
            const ui = content[lang].ui;
            document.getElementById('toc-header').innerText = ui.toc;
            document.getElementById('download-text').innerText = ui.download;
            document.getElementById('pdf-download-link').href = content[lang].pdf;
            document.getElementById('prev-text').innerText = ui.prev;
            document.getElementById('next-text').innerText = ui.next;

            // Meta Info update (Title/Author)
            // (Optional: update sidebar title if needed per lang, currently static)

            renderTOC();
            renderChapter(appState.currentChapter);
        }

        function renderTOC() {
            const list = document.getElementById('chapter-list');
            list.innerHTML = '';
            content[appState.lang].chapters.forEach((chap, idx) => {
                const li = document.createElement('li');
                const isActive = idx === appState.currentChapter;
                li.className = `px-3 py-2 rounded-md cursor-pointer text-sm transition ${isActive ? 'bg-blue-50 text-blue-700 font-bold' : 'text-gray-600 hover:bg-gray-50 hover:text-gray-900'}`;
                li.innerText = `${idx + 1}. ${chap.title}`;
                li.onclick = () => {
                    renderChapter(idx);
                    if(window.innerWidth < 768) toggleSidebar(); 
                };
                list.appendChild(li);
            });
        }

        function renderChapter(index) {
            appState.currentChapter = index;
            const chapter = content[appState.lang].chapters[index];
            const container = document.getElementById('chapter-content');
            
            stopAudio(); // Reset audio on chapter change

            // Build HTML Content
            let html = `<h1 class="text-3xl md:text-4xl font-bold mb-8 text-gray-900 font-serif-title border-b pb-4">${index + 1}. ${chapter.title}</h1>`;
            
            chapter.paragraphs.forEach(p => {
                html += `<p class="mb-6 leading-relaxed text-gray-700 text-justify">${p}</p>`;
            });

            container.innerHTML = html;
            
            document.getElementById('main-scroll').scrollTo({top: 0, behavior: 'smooth'});

            // Nav buttons state
            document.getElementById('prev-btn').disabled = index === 0;
            document.getElementById('next-btn').disabled = index === content[appState.lang].chapters.length - 1;
            
            // Page Indicator
            document.getElementById('page-indicator').innerText = `Chapter ${index + 1} of ${content[appState.lang].chapters.length}`;

            renderTOC(); // Update active state in sidebar
        }

        function nextChapter() {
            if (appState.currentChapter < content[appState.lang].chapters.length - 1) {
                renderChapter(appState.currentChapter + 1);
            }
        }

        function prevChapter() {
            if (appState.currentChapter > 0) {
                renderChapter(appState.currentChapter - 1);
            }
        }

        function toggleSidebar() {
            const sidebar = document.getElementById('sidebar');
            const overlay = document.getElementById('sidebar-overlay');
            const isClosed = sidebar.classList.contains('-translate-x-full');
            
            if (isClosed) {
                sidebar.classList.remove('-translate-x-full');
                overlay.classList.remove('hidden');
                // Allow overlay fade in
                setTimeout(() => overlay.classList.remove('opacity-0'), 10);
            } else {
                sidebar.classList.add('-translate-x-full');
                overlay.classList.add('opacity-0');
                setTimeout(() => overlay.classList.add('hidden'), 300);
            }
        }

        // --- TTS Engine ---
        let synth = window.speechSynthesis;
        let voices = [];

        function setupAudio() {
            if (speechSynthesis.onvoiceschanged !== undefined) {
                speechSynthesis.onvoiceschanged = getVoices;
            }
            getVoices();
        }

        function getVoices() {
            voices = synth.getVoices();
        }

        function togglePlay() {
            if (synth.speaking && !synth.paused) {
                synth.pause();
                updatePlayerUI(false);
            } else if (synth.paused) {
                synth.resume();
                updatePlayerUI(true);
            } else {
                readCurrentChapter();
            }
        }

        function stopAudio() {
            synth.cancel();
            appState.isPlaying = false;
            updatePlayerUI(false);
            const status = document.getElementById('player-status');
            if(status) status.innerText = "Stopped";
        }

        function readCurrentChapter() {
            if (appState.lang === 'fa') return;

            const chapter = content[appState.lang].chapters[appState.currentChapter];
            const fullText = `${chapter.title}. ${chapter.paragraphs.join(" ")}`;

            appState.utterance = new SpeechSynthesisUtterance(fullText);
            
            // Voice Selection Logic
            // Prefer Google voices or high-quality native voices if available
            const targetLang = appState.lang === 'tr' ? 'tr-TR' : 'en-US';
            
            // Try to find exact match
            let voice = voices.find(v => v.lang === targetLang && v.name.includes("Google"));
            if (!voice) voice = voices.find(v => v.lang === targetLang);
            // Fallback to broadly matching lang
            if (!voice) voice = voices.find(v => v.lang.startsWith(appState.lang));
            
            if (voice) appState.utterance.voice = voice;
            
            appState.utterance.rate = appState.speechRate;
            appState.utterance.volume = document.getElementById('volume-slider').value;

            appState.utterance.onend = () => {
                appState.isPlaying = false;
                updatePlayerUI(false);
                document.getElementById('player-status').innerText = "Finished";
            };

            // Start speaking
            synth.speak(appState.utterance);
            appState.isPlaying = true;
            updatePlayerUI(true);
        }

        function updatePlayerUI(playing) {
            const btn = document.getElementById('play-pause-btn');
            const icon = btn.querySelector('i');
            const status = document.getElementById('player-status');
            const indicator = document.getElementById('player-indicator');
            
            if (playing) {
                icon.classList.remove('fa-play');
                icon.classList.add('fa-pause');
                status.innerText = "Reading...";
                indicator.classList.remove('bg-gray-400');
                indicator.classList.add('bg-green-500', 'animate-pulse');
            } else {
                icon.classList.remove('fa-pause');
                icon.classList.add('fa-play');
                status.innerText = synth.paused ? "Paused" : "Ready";
                indicator.classList.add('bg-gray-400');
                indicator.classList.remove('bg-green-500', 'animate-pulse');
            }
        }

        function setSpeed(rate) {
            appState.speechRate = rate;
            // If playing, we must restart to apply speed change in standard Web Speech API
            if (synth.speaking) {
                stopAudio();
                readCurrentChapter();
            }
        }

        function togglePlayerVisibility() {
            const p = document.getElementById('audio-player');
            p.classList.toggle('translate-y-[120%]');
            p.classList.toggle('opacity-50');
        }

        window.onload = init;

    </script>
</body>
</html>
